# 로또 6/45 당첨번호 크롤러 및 분석기 (Hotnumber)

이 프로젝트는 동행복권(dhlottery.co.kr) 사이트에서 로또 6/45 당첨 결과를 수집하고, 당첨 번호에 대한 고급 분석 데이터를 생성하여 JSON 형태로 저장하는 도구입니다.

GitHub Actions를 통해 매주 자동으로 최신 회차 정보를 업데이트하도록 구성되어 있습니다.

## 📋 주요 기능

### 1. 데이터 크롤링 (`crawler.py`)
*   **Selenium 기반 수집**: 동적 웹페이지(JavaScript)에서 데이터를 정확하게 수집합니다.
*   **전체/증분 수집**: 1회부터 최신 회차까지 수집하며, 이미 저장된 데이터가 있다면 **새로 추가된 회차만** 자동으로 감지하여 업데이트합니다.
*   **폴더 분산 저장**: 파일 개수가 많아짐에 따라 1000회차 단위로 폴더를 나누어 저장합니다. (예: `lotto_data/1-1000/`, `lotto_data/1001-2000/`)
*   **자동 통계 갱신**: 크롤링 완료 후 전체 회차에 대한 빈도수 통계(`frequency.lotto`)를 자동으로 갱신합니다.

### 2. 패턴 분석 (`analyze_pattern.py`)
수집된 데이터를 바탕으로 다양한 통계적 패턴을 분석합니다.
*   **기본 종합 분석**: 전체 구간에 대한 평균 총합 및 최다 출현 번호를 분석합니다.
*   **주기 분석**: 특정 주기(예: 10회 주기)에 따른 번호 흐름을 파악합니다.
*   **구간 분석**: 5회, 10회 등 특정 구간 단위로 평균 합과 최다 출현 번호의 변화를 추적합니다.
*   **전문가용 고급 분석**:
    *   **이월수(Carryover)**: 직전 회차 번호가 다시 출현하는 비율 분석
    *   **연번(Consecutive)**: 연속된 번호(예: 12, 13)가 출현하는 빈도 분석
    *   **끝수(Ending Digit)**: 번호의 1의 자리 숫자 패턴 분석
    *   **동반 출현(Co-occurrence)**: 가장 자주 함께 나오는 번호 쌍(궁합수) 분석

### 3. 번호 추천 시스템 (`recommend_numbers.py`)
분석된 데이터를 기반으로 다음 회차 예상 번호를 20개 조합(4가지 전략)으로 추천합니다.
*   **전략 1: 최근 트렌드(Hot)** - 최근 30회차 내 다출현 번호 가중치 적용 (5조합)
*   **전략 2: 미출현 번호(Cold)** - 최근 15회차 이상 나오지 않은 번호 집중 공략 (5조합)
*   **전략 3: 전체 통계 균형** - 역대 모든 회차의 빈도수를 기반으로 한 안정적 조합 (5조합)
*   **전략 4: 동반 출현(Pair)** - 통계적으로 가장 자주 함께 나온 번호 쌍(궁합수) 활용 (5조합)
*   **필터링 시스템**: 생성된 조합은 총합(100~200), 홀짝 비율, 고저 비율, AC값(복잡도) 등의 통계적 필터를 통과해야만 최종 추천됩니다.

## 📂 데이터 구조

모든 데이터는 `lotto_data/` 디렉토리에 저장됩니다.

```text
lotto_data/
├── 1-1000/             # 1회 ~ 1000회 데이터
│   ├── 1.lotto
│   ├── 2.lotto
│   └── ...
├── 1001-2000/          # 1001회 ~ 2000회 데이터
│   ├── 1001.lotto
│   └── ...
├── frequency.lotto     # 전체 회차 번호별 빈도 통계
└── latest.lotto        # 최신 회차 번호 (텍스트)
```

### 1. 회차별 데이터 (`{회차}.lotto`)
각 회차의 정보는 JSON 형식으로 저장됩니다.

```json
{
    "round": 1207,
    "numbers": [10, 22, 24, 27, 38, 45],
    "bonus": 11,
    "winners": 17,
    "amount_per_winner": 1733202949,
    "analysis": {
        "odd_even_ratio": "2:4",
        "sum_value": 166,
        "ac_value": 8,
        "high_low_ratio": "4:2"
    }
}
```

### 2. 빈도 데이터 (`frequency.lotto`)
전체 회차에 대한 번호별 통계입니다.

```json
{
    "stats": {
        "1": { "main": 150, "bonus": 20, "total": 170 },
        ...
    },
    "ranking": [
        { "number": 34, "counts": { "main": 160, "bonus": 25, "total": 185 } },
        ...
    ],
    "total_rounds": 1207
}
```

## 🚀 설치 및 사용 방법

### 필수 요구 사항
*   Python 3.9 이상
*   Chrome 브라우저 (Selenium 구동용)

### 설치

1.  저장소 클론
    ```bash
    git clone https://github.com/your-username/hotnumber.git
    cd hotnumber
    ```

2.  라이브러리 설치
    ```bash
    pip install -r requirements.txt
    ```

### 실행

#### 1. 데이터 수집 (크롤링)
```bash
python crawler.py
```
*   최신 회차 정보를 수집하고 `lotto_data/` 폴더를 갱신합니다.

#### 2. 패턴 분석
```bash
python analyze_pattern.py
```
*   수집된 데이터를 바탕으로 다양한 통계적 패턴을 분석하여 콘솔에 출력합니다.

#### 3. 번호 추천
```bash
python recommend_numbers.py
```
*   분석된 데이터를 기반으로 다음 회차 추천 번호 20개 조합을 생성합니다.

## 🤖 GitHub Actions 자동화

이 저장소는 `.github/workflows/update_lotto.yml` 설정에 의해 자동화되어 있습니다.

*   **일정**: 매주 토요일 21:13 KST (토요일 12:13 UTC)
*   **동작**:
    1.  환경 설정 및 의존성 설치
    2.  `crawler.py` 실행 (신규 회차 크롤링)
    3.  변경된 데이터(`lotto_data/`)를 감지하여 자동으로 Commit & Push

따라서 별도의 수동 조작 없이도 저장소의 데이터는 항상 최신 상태로 유지됩니다.
